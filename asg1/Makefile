# A basic Makefile.
# exec defines the executable name
# OBJECTS defines the created object files for clean
# CSOURCE defines the c source files used to build the application
# CFLAGS defines the flags used by the C compiler.
# LDLIBS defines the libraries (in this case flex) to use
# CC defines the C compiler to use
# LEX defines the flex executable
# LEXGEN defines the source files generated by LEX for clean
# make all or make with no arguments will create the executable file
# make clean will remove any generated object files
# make spotless will remove object files and the executable file

exec    = myshell
OBJECTS = lex.yy.o myshell.o
CSOURCE = lex.yy.c myshell.c
CFLAGS  = -Wall -std=gnu11
LDLIBS  = -lfl
CC      = cc

LEX     = flex
LEXGEN  = lex.yy.c

all: $(exec)

$(exec): $(CSOURCE)
	$(CC) $(CFLAGS) -o $@ $(CSOURCE) $(LDLIBS)

lex.yy.c: lex.l
	$(LEX) -o $(LEXGEN) lex.l

clean:
	- rm $(OBJECTS)
	- rm $(LEXGEN)

spotless: clean
	- rm $(exec)
